je_frca_situation = { 
	icon = "gfx/interface/icons/event_icons/event_flags/event_uca_flag.dds"
	
	group = je_group_historical_content	

	should_be_pinned_by_default = yes
	
	scripted_button = je_restore_order_gua_button
	scripted_button = je_restore_order_hon_button
	scripted_button = je_restore_order_nic_button
	scripted_button = je_restore_order_cos_button
	scripted_button = je_establish_los_altos_button
	scripted_button = je_nicaragua_intervention_central_america_button
	
	immediate = {
		set_variable = {
			name = frca_support
			value = 0
		}
		c:UCA = { save_scope_as = uca_scope }
		s:STATE_GUATEMALA.region_state:UCA = { save_scope_as = guatemala_state }
		s:STATE_SAN_SALVADOR.region_state:UCA = { save_scope_as = honduras_state }
		s:STATE_HONDURAS.region_state:UCA = { save_scope_as = honduras_state }
		s:STATE_NICARAGUA.region_state:UCA = { save_scope_as = nicaragua_state }
		s:STATE_COSTA_RICA.region_state:UCA = { save_scope_as = costa_rica_state }
	}
	
	on_monthly_pulse = {
		events = { 
			journal_flavor_central_america.2 #Cholera Pandemic Hits Central America
			journal_flavor_central_america.4 #Nicaragua Declares Independence
			journal_flavor_central_america.5 #Costa Rica Declares Independence
			journal_flavor_central_america.8 #Union Collapses Into Civil War/ Accept Fate & Become El Salvador
		}
		random_events = {
			100 = 0
			25 = journal_flavor_central_america.3 #Cholera Spreads In Central America
			25 = journal_flavor_central_america.6 # Guatemala Declares Independence
			25 = journal_flavor_central_america.7 # Honduras Declares Independence
			50 = journal_flavor_central_america.11 # Civil War in Guatemala
			25 = journal_flavor_central_america.12 # Civil War in Nicaragua
			10 = journal_flavor_central_america.13 # Separatism in Honduras
		}
	}
	
	on_weekly_pulse = {
		events = {
			journal_flavor_central_america.9 #Civil War Result
			journal_flavor_central_america.10 #Civil War Result
		}
		effect = {
			if = {
				limit = {
					has_variable = gua_support_var
					NOT = { exists = c:GUA }
					NOT = { has_variable = je_gua_support_var }
				}
				change_variable = { name = frca_support add = 1 }
				set_variable = { name = je_gua_support_var }
			}
			if = {
				limit = {
					OR = {
						NOT = { has_variable = gua_support_var }
						exists = c:GUA
					}
					has_variable = je_gua_support_var
				}
				change_variable = { name = frca_support subtract = 1 }
				remove_variable = je_gua_support_var
			}
			if = {
				limit = {
					has_variable = els_support_var
					NOT = { exists = c:ELS }
					NOT = { has_variable = je_els_support_var }
				}
				change_variable = { name = frca_support add = 1 }
				set_variable = { name = je_els_support_var }
			}
			if = {
				limit = {
					OR = {
						NOT = { has_variable = els_support_var }
						exists = c:ELS
					}
					has_variable = je_els_support_var
				}
				change_variable = { name = frca_support subtract = 1 }
				remove_variable = je_els_support_var
			}
			if = {
				limit = {
					has_variable = hon_support_var
					NOT = { exists = c:HON }
					NOT = { has_variable = je_hon_support_var }
				}
				change_variable = { name = frca_support add = 1 }
				set_variable = { name = je_hon_support_var }
			}
			if = {
				limit = {
					OR = {
						NOT = { has_variable = hon_support_var }
						exists = c:HON
					}
					has_variable = je_hon_support_var
				}
				change_variable = { name = frca_support subtract = 1 }
				remove_variable = je_hon_support_var
			}
			if = {
				limit = {
					has_variable = nic_support_var
					NOT = { exists = c:NIC }
					NOT = { has_variable = je_nic_support_var }
				}
				change_variable = { name = frca_support add = 1 }
				set_variable = { name = je_nic_support_var }
			}
			if = {
				limit = {
					OR = {
						NOT = { has_variable = nic_support_var }
						exists = c:NIC
					}
					has_variable = je_nic_support_var
				}
				change_variable = { name = frca_support subtract = 1 }
				remove_variable = je_nic_support_var
			}
			if = {
				limit = {
					has_variable = cos_support_var
					NOT = { exists = c:COS }
					NOT = { has_variable = je_cos_support_var }
				}
				change_variable = { name = frca_support add = 1 }
				set_variable = { name = je_cos_support_var }
			}
			if = {
				limit = {
					OR = {
						NOT = { has_variable = cos_support_var }
						exists = c:COS
					}
					has_variable = je_cos_support_var
				}
				change_variable = { name = frca_support subtract = 1 }
				remove_variable = je_cos_support_var
			}
			if = {
				limit = {
					exists = c:GUA
					has_variable = gua_support_var
				}
				remove_variable = gua_support_var
			}
			if = {
				limit = {
					exists = c:ELS
					has_variable = els_support_var
				}
				remove_variable = els_support_var
			}
			if = {
				limit = {
					exists = c:HON
					has_variable = hon_support_var
				}
				remove_variable = hon_support_var
			}
			if = {
				limit = {
					exists = c:NIC
					has_variable = nic_support_var
				}
				remove_variable = nic_support_var
			}
			if = {
				limit = {
					exists = c:COS
					has_variable = cos_support_var
				}
				remove_variable = cos_support_var
			}
		}
	}

	complete = {
			custom_tooltip = {
				text = uca_election_tt
				NOT = { has_modifier = uca_morazan_presidency }
			}
			AND = {
				custom_tooltip = {
					text = guatemala_support_tt
					has_variable = gua_support_var
					NOT = { exists = c:GUA }
				}
				custom_tooltip = {
					text = el_salvador_support_tt
					has_variable = els_support_var
					NOT = { exists = c:ELS }
				}
				custom_tooltip = {
					text = honduras_support_tt
					has_variable = hon_support_var
					NOT = { exists = c:HON }
				}
				custom_tooltip = {
					text = nicaragua_support_tt
					has_variable = nic_support_var
					NOT = { exists = c:NIC }
				}
				custom_tooltip = {
					text = costa_rica_support_tt
					has_variable = cos_support_var
					NOT = { exists = c:COS }
				}
			}
	}
	
	fail = {
		OR = {
			custom_tooltip = {
					text = uca_won_war_tt
					has_variable = frca_won_war
				}
			custom_tooltip = {
				text = frca_lost_war_tt
				has_variable = frca_lost_war
				NOT = { has_variable = second_frca_civil_war_var }
				exists = c:GUA
				c:GUA ?= {
					NOT = {
						is_subject_of = ROOT
					}
				}
				exists = c:HON
				c:HON ?= {
					NOT = {
						is_subject_of = ROOT
					}
				}
				exists = c:NIC
				c:NIC ?= {
					NOT = {
						is_subject_of = ROOT
					}
				}
				exists = c:COS
				c:COS ?= {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}
	}
	
	on_complete = {
		custom_tooltip = {
			text = uca_ends_tt
		}
		trigger_event = { id = journal_flavor_central_america.18 }
		remove_variable = uca_cholera_pandemic
		remove_variable = livingston_var
		remove_variable = gua_secession_var
		remove_variable = els_secession_var
		remove_variable = hon_secession_var
		remove_variable = nic_secession_var
		remove_variable = cos_secession_var
	}
	
	on_fail = {
		custom_tooltip = {
			text = uca_ends_tt
		}
		custom_tooltip = {
			text = uca_ends_pttwo_tt
		}
		remove_variable = uca_cholera_pandemic
		remove_variable = livingston_var
		remove_variable = gua_secession_var
		remove_variable = els_secession_var
		remove_variable = hon_secession_var
		remove_variable = nic_secession_var
		remove_variable = cos_secession_var
		if = {
			limit = {
				has_variable = los_altos_var
				exists = c:GUA
			}
			remove_variable = los_altos var
			c:GUA = { set_variable = los_altos_var }
		}
		hidden_effect = {
			remove_diplomatic_pact = {
				country = c:COS
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:NIC
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:HON
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:GUA
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:LOS
				type = confederation
			}
		}
	}
	
	on_invalid = {
		remove_variable = uca_cholera_pandemic
		remove_variable = livingston_var
		remove_variable = gua_secession_var
		remove_variable = els_secession_var
		remove_variable = hon_secession_var
		remove_variable = nic_secession_var
		remove_variable = cos_secession_var
		hidden_effect = {
			remove_diplomatic_pact = {
				country = c:COS
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:NIC
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:HON
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:GUA
				type = confederation
			}
			remove_diplomatic_pact = {
				country = c:LOS
				type = confederation
			}
		}
	}
	
	current_value = {
		value = root.var:frca_support
	}

	goal_add_value = {
		add = 5
	}

	progressbar = yes
	
	weight = 100
	
	transferable = no

	invalid = {
		NOT = { this = c:UCA }
	}
}