namespace = journal_flavor_central_america

# The Livingston Penal Code
journal_flavor_central_america.1 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.1.t
	desc = journal_flavor_central_america.1.d
	flavor =  journal_flavor_central_america.1.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {

	}

	immediate = {

	}

	option = { #Adopt it
		name = journal_flavor_central_america.1.a
		default_option = yes
		
		add_modifier = {
			name = uca_new_penal_code
			years = 10
			is_decaying = yes
		}
	}

	option = { #Leave it be
		name = journal_flavor_central_america.1.b

	}
}

# Cholera Outbreak in Guatemala
journal_flavor_central_america.2 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.2.t
	desc = journal_flavor_central_america.2.d
	flavor =  journal_flavor_central_america.2.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		game_date >= 1836.2.2
		NOT = { has_variable = uca_cholera_pandemic }
		any_scope_state = {
			state_region = { is_homeland = cu:central_american }
			NOT = { has_variable = cholera_affect }
		}
	}
	
	immediate = {
		set_variable = uca_cholera_pandemic
		random_scope_state = {
			limit = {
				NOT = { has_variable = cholera_affect }
			}
			save_scope_as = cholera_affect_state
		}
	}
	
	option = { #Quarantine!
		name = journal_flavor_central_america.2.a
		default_option = yes 
		scope:cholera_affect_state = {
			set_variable = cholera_affect
			add_modifier = {
				name = uca_cholera
				days = 365
			}
			add_modifier = {
				name = uca_quarantine
				days = 370
			}
		}
		
		ai_chance = {
			base = 10
		}
	}
	
	option = { #Let it ravage the country
		name = journal_flavor_central_america.2.b
		scope:cholera_affect_state = {
			set_variable = cholera_affect
			add_modifier = {
				name = uca_cholera
				days = 365
			}
		}
		
		ai_chance = {
			base = 90
		}
	}

}

# Cholera Outbreak Spreads
journal_flavor_central_america.3 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.3.t
	desc = journal_flavor_central_america.3.d
	flavor =  journal_flavor_central_america.3.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	cooldown = { months = 4 }

	trigger = {
		has_variable = uca_cholera_pandemic
		any_scope_state = {
			has_modifier = uca_cholera
			NOT = { has_modifier = uca_quarantine }
			any_neighbouring_state = {
				owner = ROOT
				NOT = {
					has_variable = cholera_affect
				}
			}
		}
	}
	
	immediate = {
		random_scope_state = {
			limit = {
				has_variable = cholera_affect
				any_neighbouring_state = {
					owner = ROOT
					NOT = {
						has_variable = cholera_affect
					}
				}
			}
			save_scope_as = cholera_state
			random_neighbouring_state = {
				limit = {
					owner = ROOT
					NOT = {
						has_variable = cholera_affect
					}
				}
				save_scope_as = cholera_state_spread_to
				set_variable = {
					name = cholera_affect
				}
			}
		}
	}
	
	option = { #Let it spread
		name = journal_flavor_central_america.3.a
		default_option = yes 
		scope:cholera_state_spread_to = {
			add_modifier = {
				name = uca_cholera 
				days = 365
			}
		}
		
		ai_chance = {
			base = 50
		}
	}
	
	option = { #Contain it
		name = journal_flavor_central_america.3.b
		default_option = yes 
		scope:cholera_state_spread_to = {
			add_modifier = {
				name = uca_cholera 
				days = 365
			}
			add_modifier = {
				name = uca_quarantine
				days = 370
			}
		}
		every_state = {
			limit = {
				has_modifier = uca_cholera 
				NOT = { has_modifier = uca_quarantine } 
			}
			add_modifier = {
				name = uca_quarantine
				days = 370
			}
		}
		
		ai_chance = {
			base = 50
		}
	}
}

# Nicaragua Declares Independence
journal_flavor_central_america.4 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.4.t
	desc = journal_flavor_central_america.4.d
	flavor =  journal_flavor_central_america.4.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		this = c:UCA
		is_at_war = no
		is_active_in_diplomatic_play = no
		game_date >= 1838.1.1
		NOT = { exists = c:NIC }
		NOT = { has_variable = nic_support_var }
	}

	immediate = {
		create_country = {
            tag = NIC
			origin = c:UCA
			state = s:STATE_NICARAGUA.region_state:UCA
		}
		create_diplomatic_pact = {
            country = c:NIC
            type = confederation
        }
		c:NIC = {
			set_relations = { country = c:UCA value = -50 }
			create_character = {
				first_name = jose
				last_name = nunez
				historical = yes
				ig_leader = yes
				interest_group = ig_landowners
				ruler = yes
				birth_date = 1800.02.02
				female = no
				culture = cu:central_american
				ideology = ideology_meritocratic
				religion = rel:catholic
				traits = {
					basic_diplomat
				}
		    }
			activate_law = law_type:law_freedom_of_conscience
			activate_law = law_type:law_unitary
			activate_law = law_type:law_mercantilism
			activate_law = law_type:law_wealth_voting
			activate_law = law_type:law_censorship
		}
		s:STATE_NICARAGUA = {
			add_claim = ROOT
		}
		remove_variable = cos_support_var
		remove_variable = je_central_america_setup_cos_var
		remove_variable = je_central_america_setup_nic_var
	}

	option = { #Damnit!
		name = journal_flavor_central_america.4.a
		default_option = yes

	}
	
	option = { #Switch tags
		name = journal_flavor_central_america.4.b
		
		play_as = c:NIC
	}

}

# Costa Rica Declares Independence
journal_flavor_central_america.5 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.5.t
	desc = journal_flavor_central_america.5.d
	flavor =  journal_flavor_central_america.5.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		this = c:UCA
		is_at_war = no
		is_active_in_diplomatic_play = no
		exists = c:NIC
		NOT = { exists = c:COS }
	}

	immediate = {
		create_country = {
            tag = COS
			origin = c:UCA
			state = s:STATE_COSTA_RICA.region_state:UCA
		}
		create_diplomatic_pact = {
            country = c:COS
            type = confederation
        }
		c:COS = {
			set_relations = { country = c:UCA value = -50 }
			create_character = {
				first_name = braulio
				last_name = carrillo_colina
				historical = yes
				ig_leader = yes
				interest_group = ig_landowners
				ruler = yes
				birth_date = 1800.03.03
				female = no
				culture = cu:central_american
				ideology = ideology_reformer
				religion = rel:catholic
				traits = {
					basic_diplomat
				}
		    }
			activate_law = law_type:law_freedom_of_conscience
			activate_law = law_type:law_unitary
			activate_law = law_type:law_mercantilism
			activate_law = law_type:law_wealth_voting
		}
		s:STATE_COSTA_RICA = {
			add_claim = ROOT
		}
	}

	option = { #Damnit!
		name = journal_flavor_central_america.5.a
		default_option = yes
	
	}
	
	option = { #Switch tags
		name = journal_flavor_central_america.5.b
		
		play_as = c:COS
	}

}

# Guatemala Declares Independence
journal_flavor_central_america.6 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.6.t
	desc = journal_flavor_central_america.6.d
	flavor =  journal_flavor_central_america.6.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		this = c:UCA
		is_at_war = no
		is_active_in_diplomatic_play = no
		exists = c:NIC
		NOT = { exists = c:GUA }
		NOT = { has_variable = gua_support_var }
	}

	immediate = {
		create_country = {
            tag = GUA
			origin = c:UCA
			state = s:STATE_GUATEMALA.region_state:UCA
		}
		s:STATE_CHIAPAS.region_state:UCA = {
			set_state_owner = c:GUA
		}
		create_diplomatic_pact = {
            country = c:GUA
            type = confederation
        }
		c:GUA = {
			set_relations = { country = c:UCA value = -50 }
			create_character = {
				first_name = rafael
				last_name = carrera
				historical = yes
				ig_leader = yes
				interest_group = ig_landowners
				ruler = yes
				birth_date = 1814.04.04
				female = no
				culture = cu:central_american
				ideology = ideology_traditionalist
				religion = rel:catholic
				traits = {
					basic_diplomat
				}
		    }
			activate_law = law_type:law_freedom_of_conscience
			activate_law = law_type:law_unitary
			activate_law = law_type:law_landed_voting
			activate_law = law_type:law_mercantilism
			activate_law = law_type:law_censorship
			activate_law = law_type:law_religious_schools
		}
		s:STATE_GUATEMALA = {
			add_claim = ROOT
		}
	}

	option = { #Damnit!
		name = journal_flavor_central_america.6.a
		default_option = yes
	
	}
	
	option = { #Switch tags
		name = journal_flavor_central_america.6.b
		
		play_as = c:GUA
	}

}

# Honduras Declares Independence
journal_flavor_central_america.7 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.7.t
	desc = journal_flavor_central_america.7.d
	flavor =  journal_flavor_central_america.7.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		this = c:UCA
		is_at_war = no
		is_active_in_diplomatic_play = no
		exists = c:NIC
		NOT = { exists = c:HON }
		NOT = { has_variable = hon_support_var }
	}

	immediate = {
		create_country = {
            tag = HON
			origin = c:UCA
			state = s:STATE_HONDURAS.region_state:UCA
		}
		create_diplomatic_pact = {
            country = c:HON
            type = confederation
        }
		c:HON = {
			set_relations = { country = c:UCA value = -50 }
			create_character = {
				first_name = juan
				last_name = franscisco_de_molina
				historical = yes
				ig_leader = yes
				interest_group = ig_landowners
				ruler = yes
				birth_date = 1779.04.04
				female = no
				culture = cu:central_american
				ideology = ideology_traditionalist
				religion = rel:catholic
				traits = {
					basic_diplomat
				}
		    }
			activate_law = law_type:law_freedom_of_conscience
			activate_law = law_type:law_unitary
			activate_law = law_type:law_landed_voting
			activate_law = law_type:law_mercantilism
		}
		s:STATE_HONDURAS = {
			add_claim = ROOT
		}
	}

	option = { #Damnit!
		name = journal_flavor_central_america.7.a
		default_option = yes
	
	}
	
	option = { #Switch tags
		name = journal_flavor_central_america.7.b
		
		play_as = c:HON
	}
}

# Second Central American Civil War/ End of the Union?
journal_flavor_central_america.8 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.8.t
	desc = journal_flavor_central_america.8.d
	flavor =  journal_flavor_central_america.8.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		this = c:UCA
		AND = {
			exists = c:GUA
			exists = c:HON
			exists = c:NIC
			exists = c:COS
		}
	}

	immediate = {
		remove_diplomatic_pact = {
			country = c:COS
			type = confederation
		}
		remove_diplomatic_pact = {
			country = c:NIC
			type = confederation
		}
		remove_diplomatic_pact = {
			country = c:HON
			type = confederation
		}
		remove_diplomatic_pact = {
			country = c:GUA
			type = confederation
		}
		remove_diplomatic_pact = {
			country = c:LOS
			type = confederation
		}
	}

	option = { #Fight for the Federation!
		name = journal_flavor_central_america.8.a
		default_option = yes
		
		set_variable = second_frca_civil_war_var
		
		create_diplomatic_play = {
			name = central_american_civil_war
			type = dp_annex_war
			escalation = 80
			target_state = s:STATE_NICARAGUA.region_state:NIC
			
			add_target_backers = c:LOS
			add_target_backers = c:GUA
			add_target_backers = c:COS
			add_target_backers = c:HON
			

			add_war_goal = {
				holder = c:GUA
				type = war_reparations
			}
			add_war_goal = {
				holder = c:GUA
				type = humiliation
			}
			add_war_goal = {
				holder = c:NIC
				type = war_reparations
			}
			add_war_goal = {
				holder = c:UCA
				type = conquer_state
				target_state = s:STATE_HONDURAS.region_state:HON
			}
			add_war_goal = {
				holder = c:UCA
				type = conquer_state
				target_state = s:STATE_COSTA_RICA.region_state:COS
			}
			add_war_goal = {
				holder = c:UCA
				type = conquer_state
				target_state = s:STATE_GUATEMALA.region_state:GUA
			}
			add_war_goal = {
				holder = c:UCA
				type = conquer_state
				target_state = s:STATE_CHIAPAS.region_state:GUA
			}
		}
	
	}
	
	option = { #Continue as El Salvador
		name = journal_flavor_central_america.8.b
		
		change_tag = ELS
		
		s:STATE_CHIAPAS = {
			remove_claim = ROOT
		}
		s:STATE_GUATEMALA = {
			remove_claim = ROOT
		}
		s:STATE_HONDURAS = {
			remove_claim = ROOT
		}
		s:STATE_NICARAGUA = {
			remove_claim = ROOT
		}
		s:STATE_COSTA_RICA = {
			remove_claim = ROOT
		}
		
		activate_law = law_type:law_freedom_of_conscience
		activate_law = law_type:law_unitary
		activate_law = law_type:law_mercantilism
		
	}
}

# Defeat in the Second Civil War
journal_flavor_central_america.9 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.9.t
	desc = journal_flavor_central_america.9.d
	flavor =  journal_flavor_central_america.9.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		this = c:UCA
		is_at_war = no
		is_active_in_diplomatic_play = no
		OR = {
			AND = {
				has_variable = second_frca_civil_war_var
				OR = {
					exists = c:GUA
					exists = c:HON
					exists = c:NIC
					exists = c:COS
				}
			}
			AND = {
				exists = c:NIC
				c:NIC ?= {
					NOT = {
						is_subject_of = ROOT
					}
				}
			}
		}
	}

	immediate = {
		create_country = {
            tag = HON
			origin = c:UCA
			state = s:STATE_HONDURAS.region_state:UCA
		}
		create_country = {
            tag = GUA
			origin = c:UCA
			state = s:STATE_GUATEMALA.region_state:UCA
		}
		create_country = {
            tag = NIC
			origin = c:UCA
			state = s:STATE_NICARAGUA.region_state:UCA
		}
		create_country = {
            tag = COS
			origin = c:UCA
			state = s:STATE_COSTA_RICA.region_state:UCA
		}
		s:STATE_CHIAPAS.region_state:UCA = {
			set_state_owner = c:MEX
		}
	}

	option = { #Continue as El Salvador
		name = journal_flavor_central_america.9.a
		default_option = yes
		
		change_tag = ELS
		set_variable = frca_lost_war
		
		hidden_effect = {
			activate_law = law_type:law_unitary
		}
	}

}

# Victory in the Second Civil War
journal_flavor_central_america.10 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.10.t
	desc = journal_flavor_central_america.10.d
	flavor =  journal_flavor_central_america.10.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		this = c:UCA
		has_variable = second_frca_civil_war_var
	}

	immediate = {

	}

	option = { #The Union has prevailed for now
		name = journal_flavor_central_america.10.a
		default_option = yes
		
		set_variable = frca_won_war
	
	}

}


# Civil War in Guatemala
journal_flavor_central_america.11 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.11.t
	desc = journal_flavor_central_america.11.d
	flavor =  journal_flavor_central_america.11.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		OR = {
			has_modifier = uca_new_penal_code
			any_scope_state = {
				state_region = { is_homeland = cu:central_american }
				has_modifier = uca_quarantine
			}
			has_law = law_type:law_protectionism
			has_variable = gua_civil_peace_var	
		}
	}

	immediate = {	
		remove_variable = gua_civil_peace_var	
		remove_variable = gua_support_var	
		remove_variable = je_central_america_setup_gua_var
	}

	option = { #We can't afford it
		name = journal_flavor_central_america.11.a
		default_option = yes
	
	}

	option = { #Aid them
		name = journal_flavor_central_america.11.b

	}
}

# Civil War in Nicaragua
journal_flavor_central_america.12 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.12.t
	desc = journal_flavor_central_america.12.d
	flavor =  journal_flavor_central_america.12.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {

	}

	immediate = {	
	
	}

	option = { #Welp
		name = journal_flavor_central_america.12.a
		default_option = yes
	
	}

}

# Separatism in Honduras
journal_flavor_central_america.13 = {
	type = country_event
	placement = ROOT
	title = journal_flavor_central_america.13.t
	desc = journal_flavor_central_america.13.d
	flavor =  journal_flavor_central_america.13.f

	duration = 2

	event_image = {
		video = "southamerica_war_civilians"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {

	}

	immediate = {	
		remove_variable = hon_support_var	
		remove_variable = je_central_america_setup_hon_var
	}

	option = { #Welp
		name = journal_flavor_central_america.13.a
		default_option = yes
	
	}

}